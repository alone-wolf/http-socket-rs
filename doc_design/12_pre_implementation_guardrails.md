# 实施前约束清单

本清单用于确认实现阶段不会偏离架构 DNA。

## A. 必须满足

- [ ] 核心层未引入业务框架职责。
- [ ] 所有可选能力均有协商入口与状态记录。
- [ ] 会话与 transport 所有权边界清晰，支持 transport 替换。
- [ ] 动态分发只出现在可替换扩展边界。
- [ ] 错误链路保留根因与上下文。
- [ ] feature 依赖隔离成立，关闭 feature 可裁剪依赖。

## B. 禁止行为

- [ ] 未经协商的隐式能力切换。
- [ ] 在顶层 API 暴露不受控泛型参数。
- [ ] 通过修改核心代码来接入业务插件。
- [ ] 以破坏兼容为代价快速支持新 transport/codec。

## C. 设计变更流程

任何偏离本目录文档的实现，必须先完成：

1. 变更动机与收益说明。
2. 兼容性评估。
3. 回滚与迁移方案。
4. 文档更新后再进入实现。
