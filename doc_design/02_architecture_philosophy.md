# 架构哲学声明

## 核心声明

`http-socket-rs` 的架构哲学是：

**最小内核、显式能力、分层扩展。**

## 设计原则

1. **最小内核**
   - 核心 crate 只定义协议协商、会话状态、传输抽象与错误边界。
   - 可选能力必须下沉到 feature 或扩展模块。

2. **显式能力**
   - 所有 transport/codec/auth/observability 能力都通过声明与协商启用。
   - 禁止隐式自动升级或隐式能力漂移。

3. **分层扩展**
   - 控制面扩展通过 layer/middleware。
   - 数据面扩展通过 codec/transport trait。
   - 存储扩展通过持久化接口。

4. **兼容性优先**
   - 公共 API 默认采用增量扩展，不轻易引入破坏性变更。
   - 通过 non_exhaustive、版本协商与可选 capability 保持兼容。

## 约束

- 不以“简化短期开发”为由牺牲长期边界清晰性。
- 不允许将上层业务需求直接耦合进核心内核。
