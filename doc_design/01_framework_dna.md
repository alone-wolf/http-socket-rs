# 框架 DNA 定义

## 1. 主导架构范式选择

`http-socket` 采用 **Hybrid（以 tower 风格为主导）**：

- 控制面（control plane）采用 tower 风格：会话生命周期、认证、策略、扩展层。
- 数据面（data plane）采用 hyper 风格：面向协议帧与传输原语，保持低抽象开销。

## 2. 分层定位

框架定位在“HTTP 之上的会话化实时通信层”：

- 下层：HTTP server/client 与底层 transport 实现。
- 本层：能力协商、会话管理、状态机、重连恢复、可扩展中间层。
- 上层：业务路由、业务模型、应用数据逻辑。

## 3. 明确不解决的问题（Non-goals）

框架不直接解决以下问题：

- 不做完整 Web 框架（路由、模板、业务控制器）。
- 不绑定单一认证提供商或存储引擎。
- 不提供业务领域状态建模。
- 不内建分布式一致性协议。
- 不强制应用采用某一种可观测性后端。

## 4. 核心不变性（Architectural Invariants）

- 协商优先：任何可变能力必须协商后生效。
- 会话中心：transport 可替换，但 session 身份与协议状态保持连续。
- 核心最小化：核心模块只保留跨场景必需能力。
- 扩展外置化：可选能力通过 trait/layer 插件化注入。
